# Sentinel的熔断降级

官方文档

https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7

## 熔断策略

Sentinel 提供以下几种熔断策略：

### 慢调用比例 (`SLOW_REQUEST_RATIO`)：

选择以慢调用比例作为阈值，需要设置允许的慢调用 RT（即最大的响应时间），请求的响应时间大于该值则统计为慢调用。当单位统计时长（`statIntervalMs`）内请求数目大于设置的最小请求数目，并且慢调用的比例大于阈值，则接下来的熔断时长内请求会自动被熔断。经过熔断时长后熔断器会进入探测恢复状态（HALF-OPEN 状态），若接下来的一个请求响应时间小于设置的慢调用 RT 则结束熔断，若大于设置的慢调用 RT 则会再次被熔断。 

`RT`  **平均响应时间RT**超出阈值且在**统计时常**内通过的请求数大于等于**最小请求数** 的时候触发断路器,**熔断时常**过后关闭断路器

### 异常比例 (`ERROR_RATIO`)：

**当单位统计时长（`statIntervalMs`）内请求数目大于设置的最小请求数目，并且异常的比例大于阈值，则接下来的熔断时长内请求会自动被熔断**。经过熔断时长后熔断器会进入探测恢复状态（HALF-OPEN 状态），若接下来的一个请求成功完成（没有错误）则结束熔断，否则会再次被熔断。异常比率的阈值范围是 `[0.0, 1.0]`，代表 0% - 100%。

当单位**统计时长** 的请求数大于 **最小请求数** 并且异常比例 大于**比例阈值** 就会经历 **熔断时长** 的熔断

### 异常数 (`ERROR_COUNT`)：

当单位统计时长内的异常数目超过阈值之后会自动进行熔断。经过熔断时长后熔断器会进入探测恢复状态（HALF-OPEN 状态），若接下来的一个请求成功完成（没有错误）则结束熔断，否则会再次被熔断。

当单位统计时长内的异常数目超过阈值之后会自动进行熔断

**Sentinel的断路器时没有半开状态(试探开放状态)**

