# nginx课程

1. nginx 概念
   1. nginx 是什么？，做什么事情。
   2. 反向代理
   3. 负载均衡
   4. 动静分离
2. nginx 安装 ，常用命令和配置文件
   1. 在linux系统中安装nginx
   2. nginx中常用命令
   3. nginx的配置文件
3. nginx配置示例1-反向代理
4. nginx配置示例2-负载均衡
5. nginx配置示例3-动静分离
6. nginx配置高可用集群
7. nginx原理



------

## nginx是什么，做什么事情

*Nginx* (engine x) 是一个高性能的[HTTP](https://baike.baidu.com/item/HTTP)和[反向代理](https://baike.baidu.com/item/反向代理/7793488)web服务器，同时也提供了IMAP/POP3/SMTP[服务](https://baike.baidu.com/item/服务/100571)。Nginx是由伊戈尔·赛索耶夫为[俄罗斯](https://baike.baidu.com/item/俄罗斯/125568)访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，第一个公开版本0.1.0发布于2004年10月4日。

Nginx作为负载均衡服务：Nginx 既可以在内部直接支持 Rails 和 PHP 程序对外进行服务，也可以支持作为 HTTP[代理服务](https://baike.baidu.com/item/代理服务)对外进行服务。Nginx采用C进行编写，不论是系统资源开销还是CPU使用效率都比 Perlbal 要好很多。

[nginx 百度百科](https://baike.baidu.com/item/nginx/3817705?fr=aladdin)

### 反向代理

- 正向代理：局域网通过代理服务器访问Internet <img src="C:\Users\14712\AppData\Roaming\Typora\typora-user-images\image-20200209184321377.png" alt="正向代理" style="zoom:50%;" />
- 反向代理 ： 客户端对代理是无感知的，因为客户端不需要配置就可以访问，我们只需要把请求发送难道反向代理服务器，由反向代理服务器去选择目标服务器获取数据后，在返回给客户端，暴露的是代理服务器的地址，隐藏了真实的服务器IP地址<img src="https://gss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=4b1a652cc51349546a13e0363727f93d/3812b31bb051f81993dddee7d4b44aed2f73e7a7.jpg" alt="反向代理" style="zoom:50%;" />
- 反向代理优点
   - 提高了内部服务器的安全 外部网络用户通过反向代理访向内部服务器，只能看到反向代理服务器的IP地址和端口号，内部服务器对于外部网络来说是完全不可见。而且反向代理服务器上没有保存任何的信息资源，所有的网页程序都保存在内部服务器上，对反向代理服务器的攻击并不能使真的网页信息系统受到破坏，这样就提高了内部服务器的安全性
   - 加快了对内部服务器的访问速度   在内部服务器前放置两台反向代理服务器，分别连接到教育网和公网，这样公网用户就可以直接通过公网线路访问学校服务器，从而避开了公网和教育网之间拥挤的链路。同时反向代理服务器的缓存功能也加快了用户的访问速度。
   - 节约了有限的IP资源  校园网内部服务器除使用教育网地址外，也会采用公网的IP地址对外提供服务，公网分配的IP地址数目是有限的，如果每个服务器有分配-个公网地址，那是不可能的，通过反向代理技术很好的解决了IP地址不足的问题。

### 负载均衡

   客户端发送多个请求到服务器，服务器处理请求，有一些可能要与数据库进行交互，服 务器处理完毕后，再将结果返回给客户端。 这种架构模式对于早期的系统相对单一，并发请求相对较少的情况下是比较适合的，成 本也低。但是随着信息数量的不断增长，访问量和数据量的飞速增长，以及系统业务的复杂 度增加，这种架构会造成服务器相应客户端的请求日益缓慢，并发量特别大的时候，还容易 造成服务器直接崩溃。很明显这是由于服务器性能的瓶颈造成的问题，那么如何解决这种情 况呢？ 我们首先想到的可能是升级服务器的配置，比如提高 CPU 执行频率，加大内存等提高机 器的物理性能来解决此问题，但是我们知道摩尔定律的日益失效，硬件的性能提升已经不能 满足日益提升的需求了。最明显的一个例子，天猫双十一当天，某个热销商品的瞬时访问量 是极其庞大的，那么类似上面的系统架构，将机器都增加到现有的顶级物理配置，都是不能 够满足需求的。那么怎么办呢？ 上面的分析我们去掉了增加服务器物理配置来解决问题的办法，也就是说纵向解决问题 的办法行不通了，那么横向增加服务器的数量呢？这时候集群的概念产生了，单个服务器解 决不了，我们增加服务器的数量，然后将请求分发到各个服务器上，将原先请求集中到单个服务器上的情况改为将请求分发到多个服务器上，将负载分发到不同的服务器，也就是我们 所说的负载均衡。<img src="C:\Users\14712\AppData\Roaming\Typora\typora-user-images\image-20200209190904890.png" alt="image-20200209190904890" style="zoom:50%;" />

### 动静分离 静态资源服务

   为了加快网站的解析速度，可以把动态页面和静态页面由不同的服务器来解析，加快解析速 度。降低原来单个服务器的压力。<img src="C:\Users\14712\AppData\Roaming\Typora\typora-user-images\image-20200209191749612.png" alt="image-20200209191749612" style="zoom:50%;" />



